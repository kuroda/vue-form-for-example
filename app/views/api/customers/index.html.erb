<%
def edit_link(customer)
  templatePath = edit_api_customer_path(customer)
  url = "#customers/#{customer.id}/edit"
  content_tag(:span, "Edit",
    "@click" => "visit('#{templatePath}', '#{url}')".html_safe)
end
%>
<div>
  <div>
    <span @click="visit('/api/customers/new', '#customers/new')">New customer</span>
  </div>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Plan</th>
        <th>Gender</th>
        <th>Confirmed</th>
        <th>Approved</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @customers.each do |customer| %>
      <tr>
        <td><%= customer.name %></td>
        <td><%= customer.plan %></td>
        <td><%= customer.gender %></td>
        <td><%= customer.confirmed? %></td>
        <td><%= customer.approved? %></td>
        <td><%= edit_link(customer) %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
